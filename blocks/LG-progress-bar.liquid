{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-cart-progress-{{ ai_gen_id }} {
    background-color: {{ block.settings.background_color }};
    padding: {{ block.settings.padding }}px;
    border-radius: {{ block.settings.border_radius }}px;
  }

  .ai-cart-progress-{{ ai_gen_id }} .fs-title {
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.title_size }}px;
  }

  .ai-cart-progress-{{ ai_gen_id }} .fs-amount {
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.amount_size }}px;
    font-weight: 500;
  }

  .ai-cart-progress-{{ ai_gen_id }} .fs-progress-bar {
    height: {{ block.settings.bar_height }}px;
    background-color: {{ block.settings.bar_background_color }};
    border-radius: {{ block.settings.bar_border_radius }}px;

  }

  .ai-cart-progress-{{ ai_gen_id }} .fs-progress-fill {
    background: {{ block.settings.bar_fill_color }};
    border-radius: {{ block.settings.bar_border_radius }}px;
  }

  .ai-cart-progress-{{ ai_gen_id }} .fs-message {
    font-size: {{ block.settings.message_size }}px;
    color: {{ block.settings.text_color }};
  }

  .ai-cart-progress-{{ ai_gen_id }} .fs-empty-message {
    text-align: center;
    font-size: {{ block.settings.message_size }}px;
    color: {{ block.settings.text_color }};
    font-weight: 500;
    line-height: 1.4;
  }

  @media screen and (max-width: 749px) {
    .ai-cart-progress-{{ ai_gen_id }} .fs-header {
      flex-direction: column;
      gap: 8px;
      text-align: center;
    }
  }
{% endstyle %}

<div class="ai-cart-progress-{{ ai_gen_id }} lg-cart-progress">
  {% render 'free-shipping-progress',
    threshold_block: block,
    container_class: 'fs-progress',
    custom_message_empty: block.settings.empty_cart_message
  %}
</div>

{% schema %}
{
  "name": "Cart Progress Bar",
  "settings": [
    {
      "type": "header",
      "content": "Progress Settings"
    },

    {
      "type": "header",
      "content": "Free Shipping Thresholds"
    },
    {
      "type": "range",
      "id": "moldova_threshold",
      "min": 100,
      "max": 5000,
      "step": 100,
      "unit": "$",
      "label": "Moldova threshold",
      "default": 500
    },
    {
      "type": "range",
      "id": "romania_threshold",
      "min": 100,
      "max": 5000,
      "step": 100,
      "unit": "$",
      "label": "Romania threshold",
      "default": 1000
    },
    {
      "type": "range",
      "id": "europe_threshold",
      "min": 100,
      "max": 5000,
      "step": 100,
      "unit": "$",
      "label": "Europe threshold",
      "default": 3000
    },
    {
      "type": "range",
      "id": "world_threshold",
      "min": 100,
      "max": 5000,
      "step": 100,
      "unit": "$",
      "label": "World threshold",
      "default": 5000
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color",
      "default": "#007bff"
    },
    {
      "type": "color",
      "id": "success_color",
      "label": "Success color",
      "default": "#28a745"
    },
    {
      "type": "range",
      "id": "padding",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Progress Bar"
    },
    {
      "type": "color",
      "id": "bar_background_color",
      "label": "Bar background color",
      "default": "#e9ecef"
    },
    {
      "type": "color",
      "id": "bar_fill_color",
      "label": "Bar fill color",
      "default": "#007bff"
    },
    {
      "type": "range",
      "id": "bar_height",
      "min": 8,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Bar height",
      "default": 12
    },
    {
      "type": "range",
      "id": "bar_border_radius",
      "min": 0,
      "max": 15,
      "step": 1,
      "unit": "px",
      "label": "Bar border radius",
      "default": 6
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Title size",
      "default": 16
    },
    {
      "type": "range",
      "id": "amount_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Amount size",
      "default": 14
    },
    {
      "type": "range",
      "id": "message_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Message size",
      "default": 14
    },
    {
      "type": "text",
      "id": "empty_cart_message",
      "label": "Empty Cart Message",
      "info": "You can use __THRESHOLD__ to insert the free shipping threshold amount (e.g., Free shipping from __THRESHOLD__).",
      "default": "Free shipping from __THRESHOLD__"
    }
  ],
  "presets": [
    {
      "name": "Cart Progress Bar"
    }
  ]
}
{% endschema %}
